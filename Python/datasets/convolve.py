import numpy as np
from PIL import Image

def image_filter(size, weight):
    kernel = np.zeros((size,size))
    totalsum=0
    kernelrad = size/2
    distance=0
    caleuler = 1.0 /(2.0 * np.pi * weight**2)
    for filterY in range(-kernelrad, kernelrad+1, 1): 
        for filterX in range(-kernelrad, kernelrad+1, 1): 
            distance = ((filterX * filterX)+(filterY*filterY))/(2 * (weight * weight)) 
            kernel[filterY + kernelrad,filterX + kernelrad] = caleuler * np.exp(-distance) 
            totalsum += kernel[filterY + kernelrad, filterX + kernelrad] 
    kernel *=(1.0/totalsum)
    return kernel

def gen_convolve_data(fsize, photo='Hell.jpg', iname='bigimage', fname='filter'):
    """TODO: Describe the data generated by this function."""

    img = Image.open(photo)
    rgb = np.array(img)
    tones = np.array((0.3, 0.6, 0.11))
    rgb = np.add.reduce((rgb*tones[np.newaxis, np.newaxis, :]), axis=2)
    #np.save(iname,rgb)
    kernel = image_filter(fsize, 13.0)
    #np.save(fname,kernel)
    return {iname: rgb, fname: kernel}
